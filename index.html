<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spesial Untukmu ‚ú®</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background: linear-gradient(135deg, #1a1a1a 0%, #2c3e50 100%);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            color: white;
            transition: all 1.5s ease;
        }

        /* --- CERITA --- */
        #storySection {
            text-align: center;
            max-width: 85%;
            z-index: 20;
        }

        .story-text {
            font-size: 1.4rem;
            font-weight: 600;
            min-height: 80px;
            margin-bottom: 30px;
            color: #ffda79; 
            text-shadow: 2px 2px 10px rgba(0,0,0,0.5);
            line-height: 1.6;
        }

        .next-btn {
            background: #ff5252;
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 0 20px rgba(255, 82, 82, 0.6);
            transition: 0.3s;
        }

        .next-btn:hover {
            transform: scale(1.1);
            background: #ff7675;
            box-shadow: 0 0 30px rgba(255, 82, 82, 0.8);
        }

        /* --- KUE --- */
        #cakeSection {
            display: none;
            text-align: center;
            cursor: pointer;
        }

        .cake {
            width: 200px;
            height: 110px;
            background: #fab1a0; 
            border-radius: 15px 15px 0 0;
            position: relative;
            margin: 0 auto;
            box-shadow: inset 0 -10px 0 #e17055;
        }

        .cake::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 40px;
            background: #ffffff; 
            border-radius: 15px 15px 30px 30px;
            box-shadow: 0 5px 10px rgba(0,0,0,0.1);
        }

        .candle {
            width: 15px;
            height: 50px;
            margin: 0 auto;
            position: relative;
            background: repeating-linear-gradient(45deg, #74b9ff, #74b9ff 5px, #ffffff 5px, #ffffff 10px);
            border-radius: 4px;
        }

        .flame {
            width: 20px;
            height: 30px;
            background: radial-gradient(#fff, #fdcb6e, #e17055);
            border-radius: 50% 50% 20% 20%;
            position: absolute;
            top: -35px;
            left: -2px;
            box-shadow: 0 0 25px #fdcb6e;
            animation: flicker 0.15s infinite alternate;
        }

        @keyframes flicker {
            from { transform: scale(1) rotate(-1deg); }
            to { transform: scale(1.15) rotate(1deg); }
        }

        /* --- KARTU AKHIR (Updated) --- */
        #birthdayCard {
            display: none;
            z-index: 30;
            max-width: 90%;
            width: 600px;
            animation: slideUp 1s ease-out;
        }

        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .card-container {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .message-card {
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 25px;
            text-align: center;
            color: #2d3436;
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
            flex: 1;
            min-width: 250px;
            border-bottom: 6px solid #55efc4;
        }

        .message-card h2 {
            color: #d63031;
            margin-top: 0;
        }

        .message-card p {
            font-size: 1rem;
            line-height: 1.5;
            font-weight: 500;
        }

        .off { display: none; }
    </style>
</head>
<body>

    <audio id="bgm" loop><source src="musik.mp3" type="audio/mpeg"></audio>
    <audio id="sfxTiup"><source src="tiup.mp3" type="audio/mpeg"></audio>
    <audio id="sfxHura"><source src="hore.mp3" type="audio/mpeg"></audio>

    <div id="storySection">
        <div class="story-text" id="textDisplay">Halo Bayla... üåô</div>
        <button class="next-btn" id="btnLanjut" onclick="nextStory()">Mulai</button>
    </div>

    <div id="cakeSection">
        <div class="candle"><div class="flame" id="flame"></div></div>
        <div class="cake"></div>
        <h2 style="color: #ffeaa7; margin-top: 25px; text-shadow: 2px 2px 5px rgba(0,0,0,0.3);">Sekarang, tiup lilinnya! üéÇ</h2>
    </div>

    <div id="birthdayCard">
        <div style="text-align: center; margin-bottom: 20px;">
            <h1 style="font-size: 60px; margin:0;">üéâ</h1>
            <h2 style="color: white; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);">Happy Birthday, Bayla!</h2>
        </div>
        
        <div class="card-container">
            <div class="message-card">
                <h2>Happy Birthday ‚ú®</h2>
                <p>Terima kasih sudah berjuang selama ini, semoga kedepannya akan menjadi lebih baik. Tetap jadi Bayla yang Opung kenal ya? Bayla yang selalu ceria, Bayla yang baik, dan Bayla yang peduli.Semoga Bayla diberikan kemudahan dalam segala urusan di masa depan. Teruslah bersinar dan jangan pernah menyerah pada mimpi-mimpimu! </p>
                                <p style="font-weight: bold; margin-top: 15px;">- From Opung</p>
            </div>

            <div class="message-card" style="border-bottom-color: #fab1a0;">
                <h2>Happy Birthday üéà</h2>
                <p>Happy birthday Bayla gendukk, wish u all the bestttü•≥
 semoga Bayla bisa menjadi pribadi yang lebih baik lagi kedepan-nya, may your life be filled with happiness and lots of love‚ù§Ô∏è! </p>
                <p style="font-weight: bold; margin-top: 15px;">- Love Mommy‚ù§Ô∏è</p>
            </div>
        </div>

        <div style="text-align: center; margin-top: 30px;">
            <button onclick="location.reload()" style="background:#00cec9; color:white; border:none; padding:12px 25px; border-radius:30px; cursor:pointer; font-weight:bold; box-shadow: 0 5px 15px rgba(0,0,0,0.2);">Mainkan Lagi</button>
        </div>
    </div>

    <script>
        const stories = [
            "Hari ini adalah hari yang sangat spesial...",
            "Terima kasih sudah selalu berusaha memberikan yang terbaik.",
            "Semoga tahun ini membawa tawa dan kebahagiaan.",
            "Opung ada sedikit kejutan buat kamu. üéÅ"
        ];

        let currentStep = 0;
        const textDisplay = document.getElementById('textDisplay');
        const btnLanjut = document.getElementById('btnLanjut');
        const bgm = document.getElementById('bgm');
        const sfxTiup = document.getElementById('sfxTiup');
        const sfxHura = document.getElementById('sfxHura');

        function typeWriter(text, i, cb) {
            if (i < text.length) {
                textDisplay.innerHTML = text.substring(0, i + 1);
                setTimeout(() => typeWriter(text, i + 1, cb), 50);
            } else if (cb) { cb(); }
        }

        function nextStory() {
            if (currentStep === 0) {
                bgm.volume = 0.5;
                bgm.play().catch(e => console.log("Audio play diblokir"));
            }

            btnLanjut.style.visibility = 'hidden';
            if (currentStep < stories.length) {
                typeWriter(stories[currentStep], 0, () => {
                    btnLanjut.innerText = "Lanjut";
                    btnLanjut.style.visibility = 'visible';
                    currentStep++;
                });
            } else {
                document.getElementById('storySection').style.display = 'none';
                document.getElementById('cakeSection').style.display = 'block';
            }
        }

        document.getElementById('cakeSection').onclick = function() {
            if (navigator.vibrate) { navigator.vibrate([100, 50, 100]); } 

            sfxTiup.play();
            document.getElementById('flame').classList.add('off');

            setTimeout(() => {
                alert("Make a wish... üïØÔ∏è‚ú®");
                
                sfxHura.play();
                confetti({
                    particleCount: 200,
                    spread: 80,
                    origin: { y: 0.6 },
                    colors: ['#55efc4', '#81ecec', '#74b9ff', '#a29bfe', '#ff7675', '#fab1a0']
                });

                document.getElementById('cakeSection').style.display = 'none';
                document.getElementById('birthdayCard').style.display = 'block';
                document.body.style.background = "linear-gradient(135deg, #74b9ff 0%, #a29bfe 100%)";
            }, 600);
        };
    </script>
</body>
</html>
